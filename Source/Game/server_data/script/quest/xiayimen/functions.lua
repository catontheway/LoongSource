--LUAº¯Êý£ºÔÚ¿ÉÑ¡µØÍ¼ÖÐËæ»úÑ¡È¡Ò»¸ö×ø±êµã,½«¸Ã×ø±êµã´æÎªÈ«¾Ö±äÁ¿a,b,c

Quest_WeiDao_Pos={}
Quest_WeiDao_Pos[304]={MapCrc=3017299663, x=2704, z=3229}
Quest_WeiDao_Pos[305]={MapCrc=3017299663, x=2704, z=3229}
Quest_WeiDao_Pos[306]={MapCrc=3017299663, x=2704, z=3229}
Quest_WeiDao_Pos[307]={MapCrc=3017299919, x=1712, z=689}
Quest_WeiDao_Pos[308]={MapCrc=3017299919, x=1712, z=689}
Quest_WeiDao_Pos[309]={MapCrc=3017299919, x=1712, z=689}
Quest_WeiDao_Pos[310]={MapCrc=3017299151, x=604, z=1761}
Quest_WeiDao_Pos[311]={MapCrc=3017299151, x=604, z=1761}
Quest_WeiDao_Pos[312]={MapCrc=3017299151, x=604, z=1761}
Quest_WeiDao_Pos[313]={MapCrc=1146339967, x=788, z=1589}
Quest_WeiDao_Pos[314]={MapCrc=1146339967, x=788, z=1589}
Quest_WeiDao_Pos[315]={MapCrc=3017299407, x=2192, z=1238}
Quest_WeiDao_Pos[316]={MapCrc=3017299407, x=2192, z=1238}

Quest_WeiDao_Pos[12001]={MapCrc=3017299663, x=2704, z=3229}
Quest_WeiDao_Pos[12002]={MapCrc=3017299663, x=2704, z=3229}
Quest_WeiDao_Pos[12003]={MapCrc=3017299663, x=2704, z=3229}
Quest_WeiDao_Pos[12004]={MapCrc=3017299919, x=1712, z=689}
Quest_WeiDao_Pos[12005]={MapCrc=3017299919, x=1712, z=689}
Quest_WeiDao_Pos[12006]={MapCrc=3017299919, x=1712, z=689}
Quest_WeiDao_Pos[12007]={MapCrc=3017299151, x=604, z=1761}
Quest_WeiDao_Pos[12008]={MapCrc=3017299151, x=604, z=1761}
Quest_WeiDao_Pos[12009]={MapCrc=3017299151, x=604, z=1761}
Quest_WeiDao_Pos[12010]={MapCrc=1146339967, x=788, z=1589}
Quest_WeiDao_Pos[12011]={MapCrc=1146339967, x=788, z=1589}
Quest_WeiDao_Pos[12012]={MapCrc=3017299407, x=2192, z=1238}
Quest_WeiDao_Pos[12013]={MapCrc=3017299407, x=2192, z=1238}
Quest_WeiDao_Pos[12014]={MapCrc=3017299407, x=2192, z=1238}
Quest_WeiDao_Pos[12015]={MapCrc=3017299407, x=2192, z=1238}
Quest_WeiDao_Pos[12016]={MapCrc=3017299407, x=2192, z=1238}
Quest_WeiDao_Pos[12017]={MapCrc=3017299407, x=2192, z=1238}

Quest_ZhuE_Pos={}
--Áú³Ç²»ÖÜ´åLV25 ¿ªÊ¼
Quest_ZhuE_Pos[1]={MapCrc=3017298127, x=1940, y=8208, z=3360}
Quest_ZhuE_Pos[2]={MapCrc=3017298127, x=1750, y=8188, z=3302}
Quest_ZhuE_Pos[3]={MapCrc=3017298127, x=1697, y=8164, z=3368}
Quest_ZhuE_Pos[4]={MapCrc=3017298127, x=1299, y=10477, z=3621}
Quest_ZhuE_Pos[5]={MapCrc=3017298127, x=1438, y=10082, z=3229}
--·ïÏè1----
Quest_ZhuE_Pos[6]={MapCrc=3017298383, x=1367, y=10726, z=2047}----
Quest_ZhuE_Pos[7]={MapCrc=3017298383, x=1279, y=9714, z=2164}----
Quest_ZhuE_Pos[8]={MapCrc=3017298383, x=1603, y=10478, z=2225}----
Quest_ZhuE_Pos[9]={MapCrc=3017298383, x=512, y=8888, z=1450}----
Quest_ZhuE_Pos[10]={MapCrc=3017298383, x=816, y=9460, z=1306}----
--·ïÏè2ÅÌ¹Å´å
Quest_ZhuE_Pos[11]={MapCrc=3017298383, x=751, y=8938, z=1312}
Quest_ZhuE_Pos[12]={MapCrc=3017298383, x=701, y=10218, z=1151}
Quest_ZhuE_Pos[13]={MapCrc=3017298383, x=441, y=13824, z=987}
Quest_ZhuE_Pos[14]={MapCrc=3017298383, x=658, y=12600, z=915}
Quest_ZhuE_Pos[15]={MapCrc=3017298383, x=859, y=8772, z=1189}
--·ïÏè3ÒåÑô¾üÓª
Quest_ZhuE_Pos[16]={MapCrc=3017298383, x=2101, y=10964, z=2636}
Quest_ZhuE_Pos[17]={MapCrc=3017298383, x=2013, y=10994, z=2506}
Quest_ZhuE_Pos[18]={MapCrc=3017298383, x=2045, y=10826, z=2391}
Quest_ZhuE_Pos[19]={MapCrc=3017298383, x=1924, y=10902, z=2444}
Quest_ZhuE_Pos[20]={MapCrc=3017298383, x=2097, y=10964, z=2727}
--·ïÏè4ÂäÑÒÓªµØ
Quest_ZhuE_Pos[21]={MapCrc=3017298383, x=2359, y=11266, z=1668}
Quest_ZhuE_Pos[22]={MapCrc=3017298383, x=2220, y=9700, z=1612}
Quest_ZhuE_Pos[23]={MapCrc=3017298383, x=2635, y=16700, z=1281}
Quest_ZhuE_Pos[24]={MapCrc=3017298383, x=2359, y=11266, z=1668}--
Quest_ZhuE_Pos[25]={MapCrc=3017298383, x=2220, y=9700, z=1612}--
--äÃÂ¹1ÀÞ¹Ä·»
Quest_ZhuE_Pos[26]={MapCrc=3017299663, x=1646, y=20413, z=3115}
Quest_ZhuE_Pos[27]={MapCrc=3017299663, x=1620, y=20106, z=3296}
Quest_ZhuE_Pos[28]={MapCrc=3017299663, x=2431, y=20427, z=3104}
Quest_ZhuE_Pos[29]={MapCrc=3017299663, x=2418, y=18843, z=2895}
Quest_ZhuE_Pos[30]={MapCrc=3017299663, x=2697, y=20770, z=3257}
--äÃÂ¹2·çÉ½Õ¯
Quest_ZhuE_Pos[31]={MapCrc=3017299663, x=2795, y=17632, z=1586}
Quest_ZhuE_Pos[32]={MapCrc=3017299663, x=3111, y=22584, z=2348}
Quest_ZhuE_Pos[33]={MapCrc=3017299663, x=2871, y=21252, z=2043}
Quest_ZhuE_Pos[34]={MapCrc=3017299663, x=2963, y=22584, z=2398}
Quest_ZhuE_Pos[35]={MapCrc=3017299663, x=2991, y=21841, z=1810}

--äÃÂ¹3ÊÜìø¸ó
Quest_ZhuE_Pos[36]={MapCrc=3017299663, x=1250, y=12371, z=1734}
Quest_ZhuE_Pos[37]={MapCrc=3017299663, x=1092, y=13186, z=1416}
Quest_ZhuE_Pos[38]={MapCrc=3017299663, x=1066, y=13083, z=1916}
Quest_ZhuE_Pos[39]={MapCrc=3017299663, x=1353, y=12383, z=1904}
Quest_ZhuE_Pos[40]={MapCrc=3017299663, x=1273, y=12949, z=1459}

--äÃÂ¹4ÌìÒ»Õò
Quest_ZhuE_Pos[41]={MapCrc=3017299663, x=3135, y=17200, z=633}
Quest_ZhuE_Pos[42]={MapCrc=3017299663, x=2924, y=12941, z=1175}
Quest_ZhuE_Pos[43]={MapCrc=3017299663, x=2443, y=13319, z=899}
Quest_ZhuE_Pos[44]={MapCrc=3017299663, x=2322, y=12311, z=997}
Quest_ZhuE_Pos[45]={MapCrc=3017299663, x=2729, y=12401, z=1126}

--Î×Ë®1ÖñºþÕ¯
Quest_ZhuE_Pos[46]={MapCrc=3017299919, x=1253, y=16498, z=1592}
Quest_ZhuE_Pos[47]={MapCrc=3017299919, x=1842, y=16587, z=1889}
Quest_ZhuE_Pos[48]={MapCrc=3017299919, x=2068, y=16752, z=2094}
Quest_ZhuE_Pos[49]={MapCrc=3017299919, x=1873, y=17856, z=1948}
Quest_ZhuE_Pos[50]={MapCrc=3017299919, x=1253, y=16498, z=1592}----------
--Î×Ë®2ÅÎ¹é´å
Quest_ZhuE_Pos[51]={MapCrc=3017298127, x=994, y=6735, z=427}
Quest_ZhuE_Pos[52]={MapCrc=3017298127, x=994, y=6735, z=427}
Quest_ZhuE_Pos[53]={MapCrc=3017298127, x=444, y=11501, z=848}
Quest_ZhuE_Pos[54]={MapCrc=3017298127, x=625, y=8766, z=917}
Quest_ZhuE_Pos[55]={MapCrc=3017298127, x=707, y=7346, z=961}
--Î×Ë®3Àë³îÂëÍ·
Quest_ZhuE_Pos[56]={MapCrc=3017299919, x=2591, y=18451, z=2524}
Quest_ZhuE_Pos[57]={MapCrc=3017299919, x=2001, y=18895, z=2418}
Quest_ZhuE_Pos[58]={MapCrc=3017299919, x=2323, y=16316, z=2658}
Quest_ZhuE_Pos[59]={MapCrc=3017299919, x=2527, y=20433, z=1386}
Quest_ZhuE_Pos[60]={MapCrc=3017299919, x=2397, y=19368, z=1623}
--Î×Ë®4ÃÉò¿Õ¯
Quest_ZhuE_Pos[61]={MapCrc=3017299919, x=2612, y=17932, z=1129}
Quest_ZhuE_Pos[62]={MapCrc=3017299919, x=1996, y=17133, z=630}
Quest_ZhuE_Pos[63]={MapCrc=3017299919, x=2394, y=21974, z=606}
Quest_ZhuE_Pos[64]={MapCrc=3017299919, x=2475, y=21450, z=745}
Quest_ZhuE_Pos[65]={MapCrc=3017299919, x=2242, y=18228, z=669}
--ÎäÒÄ1ÒûºÞÌ²
Quest_ZhuE_Pos[66]={MapCrc=3017299151, x=1385, y=5921, z=1374}
Quest_ZhuE_Pos[67]={MapCrc=3017299151, x=1543, y=5880, z=1150}
Quest_ZhuE_Pos[68]={MapCrc=3017299151, x=931, y=5315, z=1112}
Quest_ZhuE_Pos[69]={MapCrc=3017299151, x=838, y=7500, z=772}
Quest_ZhuE_Pos[70]={MapCrc=3017299151, x=1385, y=5921, z=1374}-------------
--ÎäÒÄ2ÓÈ¹«Õ¯
Quest_ZhuE_Pos[71]={MapCrc=3017299151, x=943, y=4578, z=2240}
Quest_ZhuE_Pos[72]={MapCrc=3017299151, x=1575, y=5913, z=1980}
Quest_ZhuE_Pos[73]={MapCrc=3017299151, x=1559, y=7799, z=1763}
Quest_ZhuE_Pos[74]={MapCrc=3017299151, x=1247, y=7152, z=1846}
Quest_ZhuE_Pos[75]={MapCrc=3017299151, x=943, y=4578, z=2240}
--ÎäÒÄ3ÆÐÌá¹Û
Quest_ZhuE_Pos[76]={MapCrc=3017299151, x=1164, y=5171, z=529}
Quest_ZhuE_Pos[77]={MapCrc=3017299151, x=1452, y=3145, z=778}
Quest_ZhuE_Pos[78]={MapCrc=3017299151, x=1641, y=3100, z=368}
Quest_ZhuE_Pos[79]={MapCrc=3017299151, x=1991, y=3100, z=503}
Quest_ZhuE_Pos[80]={MapCrc=3017299151, x=843, y=5528, z=534}
--ÎäÒÄ4
Quest_ZhuE_Pos[81]={MapCrc=1146339967, x=750, y=13327, z=1658}---
Quest_ZhuE_Pos[82]={MapCrc=1146339967, x=976, y=12714, z=1591}---
Quest_ZhuE_Pos[83]={MapCrc=1146339967, x=972, y=13349, z=1285}---
Quest_ZhuE_Pos[84]={MapCrc=1146339967, x=1139, y=12482, z=1543}---
Quest_ZhuE_Pos[85]={MapCrc=1146339967, x=1490, y=3466, z=862}---
--À¥ÂØ1
Quest_ZhuE_Pos[86]={MapCrc=3017299407, x=2290, y=10478, z=1087}
Quest_ZhuE_Pos[87]={MapCrc=3017299407, x=2115, y=9077, z=984}
Quest_ZhuE_Pos[88]={MapCrc=3017299407, x=2023, y=8769, z=1196}
Quest_ZhuE_Pos[89]={MapCrc=3017299407, x=2023, y=7871, z=1469}
Quest_ZhuE_Pos[90]={MapCrc=3017299407, x=2642, y=7979, z=1327}
--À¥ÂØ2
Quest_ZhuE_Pos[91]={MapCrc=3017299407, x=706, y=8261, z=2589}
Quest_ZhuE_Pos[92]={MapCrc=3017299407, x=1192, y=8412, z=2646}
Quest_ZhuE_Pos[93]={MapCrc=3017299407, x=765, y=8275, z=2728}
Quest_ZhuE_Pos[94]={MapCrc=3017299407, x=1059, y=8396, z=2785}
Quest_ZhuE_Pos[95]={MapCrc=3017299407, x=845, y=7513, z=2544}
--À¥ÂØ3
Quest_ZhuE_Pos[96]={MapCrc=3017299407, x=964, y=7868, z=800}
Quest_ZhuE_Pos[97]={MapCrc=3017299407, x=1141, y=10783, z=675}
Quest_ZhuE_Pos[98]={MapCrc=3017299407, x=1370, y=10768, z=1512}
Quest_ZhuE_Pos[99]={MapCrc=3017299407, x=1543, y=16563, z=904}
Quest_ZhuE_Pos[100]={MapCrc=3017299407, x=846, y=8386, z=726}



function ZhuE_GetPoint(MapID, InstanceID, RoleID)

	local rolelevel = role.GetRoleLevel(MapID, InstanceID, RoleID)
	local Index = 0
	if rolelevel>=25 and rolelevel<=30 then
		if MapID==3017298127 then
			Index=0+math.random(5)  --²»ÖÜ´å
		else
			Index=5+math.random(5)
		end

	elseif rolelevel>=30 and rolelevel<=35 then
		Index=10+math.random(5)  --·ïÏè2ÅÌ¹Å´å

	elseif rolelevel>=36 and rolelevel<=40 then
		Index=15+math.random(5)--·ïÏè3ÒåÑô¾üÓª

	elseif rolelevel>=41 and rolelevel<=45 then
		if MapID==3017298383 then
			Index=20+math.random(5)--·ïÏè4ÂäÑÒÓªµØ
		else
			Index=25+math.random(5)--äÃÂ¹1ÀÞ¹Ä·»
		end

	elseif rolelevel>=46 and rolelevel<=50 then
		Index=30+math.random(5)--äÃÂ¹2·çÉ½Õ¯


	elseif rolelevel>=51 and rolelevel<=54 then
		Index=35+math.random(5)--äÃÂ¹3ÊÜìø¸ó


	elseif rolelevel>=55 and rolelevel<=59 then
		if MapID==3017299663 then
			Index=40+math.random(5)--äÃÂ¹4ÌìÒ»Õò

		else
			Index=45+math.random(4)--Î×Ë®1ÖñºþÕ¯

		end

	elseif rolelevel>=60 and rolelevel<=64 then
		Index=50+math.random(5)--Î×Ë®2ÅÎ¹é´å

	elseif rolelevel>=65 and rolelevel<=69 then
		Index=55+math.random(5)--Î×Ë®3Àë³îÂëÍ·

	elseif rolelevel>=70 and rolelevel<=75 then
		if MapID==3017299919 then
			Index=60+math.random(5)--Î×Ë®4ÃÉò¿Õ¯

		else
			Index=65+math.random(5)--ÎäÒÄ1ÒûºÞÌ²

		end
	elseif rolelevel>=76 and rolelevel<=80 then
		Index=70+math.random(10)--ÎäÒÄ2ÓÈ¹«Õ¯--ÎäÒÄ3ÆÐÌá¹Û

	elseif rolelevel>=81 and rolelevel<=85 then
		Index=80+math.random(5)--ÎäÒÄ4

	elseif rolelevel>=86 and rolelevel<=90 then
		Index=85+math.random(5)--À¥ÂØ1

	elseif rolelevel>=91 and rolelevel<=95 then
		Index=90+math.random(5)--À¥ÂØ2

	elseif rolelevel>=96 then
		Index=95+math.random(5)--À¥ÂØ3
	end
	role.SetRoleScriptData(RoleID, 1, RoleDataType["ZhuE_Pos"], Index)

end

function JiShi_GetPoint(MapID, InstanceID, RoleID)

	local rolelevel = role.GetRoleLevel(MapID, InstanceID, RoleID)
	local Index = 0
	if rolelevel>=25 and rolelevel<=30 then
		if MapID==3017298127 then
			Index=0+math.random(5)  --²»ÖÜ´å
		else
			Index=5+math.random(5)
		end

	elseif rolelevel>=30 and rolelevel<=35 then
		Index=10+math.random(5)  --·ïÏè2ÅÌ¹Å´å

	elseif rolelevel>=36 and rolelevel<=40 then
		Index=15+math.random(5)--·ïÏè3ÒåÑô¾üÓª

	elseif rolelevel>=41 and rolelevel<=45 then
		if MapID==3017298383 then
			Index=20+math.random(5)--·ïÏè4ÂäÑÒÓªµØ
		else
			Index=25+math.random(5)--äÃÂ¹1ÀÞ¹Ä·»
		end

	elseif rolelevel>=46 and rolelevel<=50 then
		Index=30+math.random(5)--äÃÂ¹2·çÉ½Õ¯


	elseif rolelevel>=51 and rolelevel<=54 then
		Index=35+math.random(5)--äÃÂ¹3ÊÜìø¸ó


	elseif rolelevel>=55 and rolelevel<=59 then
		if MapID==3017299663 then
			Index=40+math.random(5)--äÃÂ¹4ÌìÒ»Õò

		else
			Index=45+math.random(4)--Î×Ë®1ÖñºþÕ¯

		end

	elseif rolelevel>=60 and rolelevel<=64 then
		Index=50+math.random(5)--Î×Ë®2ÅÎ¹é´å

	elseif rolelevel>=65 and rolelevel<=69 then
		Index=55+math.random(5)--Î×Ë®3Àë³îÂëÍ·

	elseif rolelevel>=70 and rolelevel<=75 then
		if MapID==3017299919 then
			Index=60+math.random(5)--Î×Ë®4ÃÉò¿Õ¯

		else
			Index=65+math.random(5)--ÎäÒÄ1ÒûºÞÌ²

		end
	elseif rolelevel>=76 and rolelevel<=80 then
		Index=70+math.random(10)--ÎäÒÄ2ÓÈ¹«Õ¯--ÎäÒÄ3ÆÐÌá¹Û

	elseif rolelevel>=81 and rolelevel<=85 then
		Index=80+math.random(5)--ÎäÒÄ4

	elseif rolelevel>=86 and rolelevel<=90 then
		Index=85+math.random(5)--À¥ÂØ1

	elseif rolelevel>=91 and rolelevel<=95 then
		Index=90+math.random(5)--À¥ÂØ2

	elseif rolelevel>=96 then
		Index=95+math.random(5)--À¥ÂØ3
	end
	role.SetRoleScriptData(RoleID, 1, RoleDataType["JiShi_Pos"], Index)

end

-----------function ChuMo_GetPoint(MapID, InstanceID, RoleID)------------
--------·ÂÕÕÖï¶ñ±àÐ´----´ýÐÞ¸Ä
----------role.SetRoleScriptData(RoleID, 4, RoleDataType["ChuMo_Pos"], localA, localB, localC, localMap)


function ChuMo_GetPoint(MapID, InstanceID, RoleID)

	--Èç¹û¶ÓÎé³ÉÔ±ÒÑ½ÓÓÐÈÎÎñ£¬Ôò»ñÈ¡¶ÓÎé³ÉÔ±µÄPosÖµ
	local TeamID = role.IsRoleHaveTeam(MapID, InstanceID, RoleID)

	local Role = {}
	Role[1], Role[2], Role[3], Role[4], Role[5], Role[6] = role.GetRoleTeamMemID(TeamID)

    for i=1, 6 do
	    if Role[i] and Role[i]~= 4294967295 then
	        local ChuMo_Pos=role.GetRoleScriptData(Role[i], 1, RoleDataType["ChuMo_Pos"])
	        if ChuMo_Pos and ChuMo_Pos~=0 then
			    role.SetRoleScriptData(RoleID, 1, RoleDataType["ChuMo_Pos"], ChuMo_Pos)
			    return 0
		    end
	    end
	end

	--·ñÔò£¬¸ù¾ÝµÈ¼¶¼°½ÓÈ¡µÈ¼¶Ëæ»ú»ñÈ¡Ò»¸öPosÖµ
	local rolelevel = role.GetRoleLevel(MapID, InstanceID, RoleID)
	local Index = 0
	if rolelevel>=40 and rolelevel<=45 then
		if MapID==3017298383 then
			Index=20+math.random(5)
		else
			Index=25+math.random(5)
		end
	elseif rolelevel>=46 and rolelevel<=50 then
		Index=30+math.random(5)
	elseif rolelevel>=51 and rolelevel<=54 then
		Index=35+math.random(5)
	elseif rolelevel>=55 and rolelevel<=59 then
		if MapID==3017299663 then
			Index=40+math.random(5)
		else
			Index=45+math.random(5)
		end
	elseif rolelevel>=60 and rolelevel<=64 then
		Index=50+math.random(5)
	elseif rolelevel>=65 and rolelevel<=69 then
		Index=55+math.random(5)
	elseif rolelevel>=70 and rolelevel<=75 then
		if MapID==3017299919 then
			Index=60+math.random(5)
		else
			Index=65+math.random(5)
		end
	elseif rolelevel>=76 and rolelevel<=80 then
		Index=70+math.random(10)--ÎäÒÄ2ÓÈ¹«Õ¯--ÎäÒÄ3ÆÐÌá¹Û

	elseif rolelevel>=81 and rolelevel<=85 then
		Index=80+math.random(5)--ÎäÒÄ4

	elseif rolelevel>=86 and rolelevel<=90 then
		Index=85+math.random(5)--À¥ÂØ1

	elseif rolelevel>=91 and rolelevel<=95 then
		Index=90+math.random(5)--À¥ÂØ2

	elseif rolelevel>=96 then
		Index=95+math.random(5)--À¥ÂØ3
	end

	role.SetRoleScriptData(RoleID, 1, RoleDataType["ChuMo_Pos"], Index)

	return 1

end

--LUAº¯Êý£º·¢ËÍÏûÏ¢¸æËß¿Í»§¶Ë
function SendRandomResult(TalkCommentID, RoleID)
	local MsgID = msg.BeginMsgEvent()
	msg.AddMsgEvent(MsgID, 13, 0)
	msg.AddMsgEvent(MsgID, 1, TalkCommentID)
	msg.DispatchRoleMsgEvent(RoleID, MsgID)
end

--LUAº¯Êý£ºÅÐ¶ÏÍæ¼ÒÊÇ·ñ½øÈëÁËÖ¸¶¨ÇøÓò
function ZhuE_EnterNearArea(MapID, InstanceID, RoleID)
    local Index = role.GetRoleScriptData(RoleID, 1, RoleDataType["ZhuE_Pos"])
    --Ê×ÏÈÅÐ¶ÏÍæ¼ÒÊÇ·ñ´¦ÔÚÄ¿±êµØÍ¼ÖÐ
    if not Index or Index <= 0 or MapID ~= Quest_ZhuE_Pos[Index].MapCrc then
        return false
    end

    --µÃµ½Íæ¼Òµ±Ç°×ø±ê
	local x, y, z = unit.GetPosition(MapID, InstanceID, RoleID)

	--ÅÐ¶ÏÍæ¼ÒÊÇ·ñÔÚÖ¸¶¨×ø±êµã¸½½ü
	if (x-Quest_ZhuE_Pos[Index].x<= 30 and x-Quest_ZhuE_Pos[Index].x>= -30) and (z-Quest_ZhuE_Pos[Index].z<= 30 and z-Quest_ZhuE_Pos[Index].z>= -30) then
	    return true
	else
	    return false
	end
end

--LUAº¯Êý£ºÅÐ¶ÏÍæ¼ÒÊÇ·ñ½øÈëÁËÖ¸¶¨ÇøÓò
function WeiDao_EnterNearArea(MapID, InstanceID, RoleID)
    local Index = role.GetRoleScriptData(RoleID, 1, RoleDataType["WeiDao_Index"])
    --Ê×ÏÈÅÐ¶ÏÍæ¼ÒÊÇ·ñ´¦ÔÚÄ¿±êµØÍ¼ÖÐ
    if not Index or Index <= 0 or MapID ~= Quest_WeiDao_Pos[Index].MapCrc then
        return false
    end

    --µÃµ½Íæ¼Òµ±Ç°×ø±ê
	local x, y, z = unit.GetPosition(MapID, InstanceID, RoleID)

	--ÅÐ¶ÏÍæ¼ÒÊÇ·ñÔÚÖ¸¶¨×ø±êµã¸½½ü
	if (x-Quest_WeiDao_Pos[Index].x<= 30 and x-Quest_WeiDao_Pos[Index].x>= -30) and (z-Quest_WeiDao_Pos[Index].z<= 30 and z-Quest_WeiDao_Pos[Index].z>= -30) then
	    return true
	else
	    return false
	end
end

function JiShi_EnterNearArea(MapID, InstanceID, RoleID)
    local Index = role.GetRoleScriptData(RoleID, 1, RoleDataType["JiShi_Pos"])
    --Ê×ÏÈÅÐ¶ÏÍæ¼ÒÊÇ·ñ´¦ÔÚÄ¿±êµØÍ¼ÖÐ
    if not Index or Index <= 0 or MapID ~= Quest_ZhuE_Pos[Index].MapCrc then
        return false
    end

    --µÃµ½Íæ¼Òµ±Ç°×ø±ê
	local x, y, z = unit.GetPosition(MapID, InstanceID, RoleID)

	--ÅÐ¶ÏÍæ¼ÒÊÇ·ñÔÚÖ¸¶¨×ø±êµã¸½½ü
	if (x-Quest_ZhuE_Pos[Index].x<= 30 and x-Quest_ZhuE_Pos[Index].x>= -30) and (z-Quest_ZhuE_Pos[Index].z<= 30 and z-Quest_ZhuE_Pos[Index].z>= -30) then
	    return true
	else
	    return false
	end
end

--LUAº¯Êý£ºÅÐ¶ÏÍæ¼ÒÊÇ·ñ½øÈëÁËÖ¸¶¨ÇøÓò
function ChuMo_EnterNearArea(MapID, InstanceID, RoleID)
    local Index = role.GetRoleScriptData(RoleID, 1, RoleDataType["ChuMo_Pos"])
    --Ê×ÏÈÅÐ¶ÏÍæ¼ÒÊÇ·ñ´¦ÔÚÄ¿±êµØÍ¼ÖÐ
    if not Index or Index <= 0 or MapID ~= Quest_ZhuE_Pos[Index].MapCrc then
        return false
    end

    --µÃµ½Íæ¼Òµ±Ç°×ø±ê
	local x, y, z = unit.GetPosition(MapID, InstanceID, RoleID)

	--ÅÐ¶ÏÍæ¼ÒÊÇ·ñÔÚÖ¸¶¨×ø±êµã¸½½ü
	if (x-Quest_ZhuE_Pos[Index].x<= 30 and x-Quest_ZhuE_Pos[Index].x>= -30) and (z-Quest_ZhuE_Pos[Index].z<= 30 and z-Quest_ZhuE_Pos[Index].z>= -30) then
	    return true
	else
	    return false
	end
end

CreatureETu = {}
CreatureETu[1] = {ID0 = 1540040,ID1 = 1540001,ID2 = 1540002,ID3 = 1540003} --25-29,¹ÖÎïµÈ¼¶LV25
CreatureETu[2] = {ID0 = 1540041,ID1 = 1540004,ID2 = 1540005,ID3 = 1540006} --30-34
CreatureETu[3] = {ID0 = 1540042,ID1 = 1540007,ID2 = 1540008,ID3 = 1540009} --35-39
CreatureETu[4] = {ID0 = 1540043,ID1 = 1540010,ID2 = 1540011,ID3 = 1540012} --40-44
CreatureETu[5] = {ID0 = 1540044,ID1 = 1540013,ID2 = 1540014,ID3 = 1540015} --45-49
CreatureETu[6] = {ID0 = 1540045,ID1 = 1540016,ID2 = 1540017,ID3 = 1540018} --50-54
CreatureETu[7] = {ID0 = 1540046,ID1 = 1540019,ID2 = 1540020,ID3 = 1540021} --55-59
CreatureETu[8] = {ID0 = 1540047,ID1 = 1540022,ID2 = 1540023,ID3 = 1540024} --60-64
CreatureETu[9] = {ID0 = 1540048,ID1 = 1540025,ID2 = 1540026,ID3 = 1540027} --65-69
CreatureETu[10] = {ID0 = 1540049,ID1 = 1540028,ID2 = 1540029,ID3 = 1540030} --70-74
CreatureETu[11] = {ID0 = 1540050,ID1 = 1540031,ID2 = 1540032,ID3 = 1540033} --75-79
CreatureETu[12] = {ID0 = 1540051,ID1 = 1540034,ID2 = 1540035,ID3 = 1540036} --80-84,¹ÖÎïµÈ¼¶80
CreatureETu[13] = {ID0 = 1540052,ID1 = 1540037,ID2 = 1540038,ID3 = 1540039} --80-84,¹ÖÎïµÈ¼¶80
CreatureETu[14] = {ID0 = 1540053,ID1 = 1540101,ID2 = 1540102,ID3 = 1540103} --80-84,¹ÖÎïµÈ¼¶80
CreatureETu[15] = {ID0 = 1540054,ID1 = 1540104,ID2 = 1540105,ID3 = 1540106} --80-84,¹ÖÎïµÈ¼¶80
CreatureETu[16] = {ID0 = 1540055,ID1 = 1540107,ID2 = 1540108,ID3 = 1540109} --80-84,¹ÖÎïµÈ¼¶80


function ZhuE_ETu(MapID,InstanceID,RoleID,Type) --¸ù¾ÝÍæ¼ÒµÈ¼¶Ë¢ÐÂÍ¨¼©¶ñÍ½»òÕßà¶ª(Type:0-à¶ª£¬1-¶ñÍ½)

	local RoleLevel = role.GetRoleLevel(MapID, InstanceID, RoleID)
	RoleLevel = RoleLevel - 25
	local ETuIndex = math.floor(RoleLevel/5) + 1
	if ETuIndex > 16 then
	    ETuIndex = 16
	end
	local r = math.random(3)
	local ID = 0

	if Type == 0 then  --Í¨¼©¶ñÍ½
		if r == 1 then
			ID = CreatureETu[ETuIndex].ID1
		elseif r == 2 then
			ID = CreatureETu[ETuIndex].ID2
		elseif r == 3 then
			ID = CreatureETu[ETuIndex].ID3
		end
 	elseif Type == 1 then  --¶ñÍ½à¶ª
		ID = CreatureETu[ETuIndex].ID0
	end

	return ID
end




--LUAº¯Êý:ÏÀÒåÃÅÖ®Öï¶ñ
function ZhuE_Use(MapID, InstanceID, RoleID)
	local r = math.random(100)
	local t = role.GetRoleScriptData(RoleID, 1, RoleDataType["ZhuE_UseTimes"])
	local x, y ,z = unit.GetPosition(MapID, InstanceID, RoleID)
	local RoleLevel = role.GetRoleLevel(MapID, InstanceID, RoleID)

	if t==0 then --µÚÒ»´ÎÊ¹ÓÃ
		role.SetRoleScriptData(RoleID, 1, RoleDataType["ZhuE_UseTimes"],1)
		--Ë¢³öÍæ¼Ò¶ÔÓ¦µÈ¼¶µÄÍ¨¼©¶ñÍ½
		if r<=50 then
			map.MapCreateCreature(MapID, InstanceID, ZhuE_ETu(MapID, InstanceID, RoleID, 0), x+2, y, z+2)
			role.RemoveFromRole(MapID, InstanceID, RoleID, 3200001, 1, 101) --É¾³ýÃÜÐÅ

		--ÌáÊ¾Íæ¼Ò£ºÍ¨¼©¶ñÍ½ÒÑÌÓÅÜ£¬ÇëÇ°ÍùÐÂµÄ×ø±êÑ°ÕÒ¡£
		--Í¬Ê±ÌáÊ¾£º´Ë´¦Ö»Ê£ÏÂÁË¶ñÍ½µÄÁ½¸öà¶ÂÞ¡­¡­
		elseif r<=80 then
			map.MapCreateCreature(MapID, InstanceID, ZhuE_ETu(MapID, InstanceID, RoleID, 1), x+2, y, z+2)
			map.MapCreateCreature(MapID, InstanceID, ZhuE_ETu(MapID, InstanceID, RoleID, 1), x-2, y, z-2)
			SendRandomResult(250, RoleID)
			SendRandomResult(251, RoleID)
			ZhuE_GetPoint(MapID, InstanceID, RoleID) --ÖØÐÂ»ñµÃËæ»ú×ø±ê

		--ÌáÊ¾Íæ¼Ò£ºÍ¨¼©¶ñÍ½ÒÑÌÓÅÜ£¬ÇëÇ°ÍùÐÂµÄ×ø±êÑ°ÕÒ
		elseif r<=90 then
			--Ïò¿Í»§¶Ë·¢ÏûÏ¢
			SendRandomResult(250,RoleID)
			ZhuE_GetPoint(MapID, InstanceID, RoleID) --ÖØÐÂ»ñµÃËæ»ú×ø±ê

		--ÌáÊ¾Íæ¼Ò£ºÍ¨¼©¶ñÍ½ÒÑÌÓÅÜ£¬ÇëÇ°ÍùÐÂµÄ×ø±êÑ°ÕÒ
		--Í¬Ê±ÌáÊ¾£º·¢ÏÖÁË¶ñÍ½ÌÓÅÜÊ±Ê§ÂäµÄ°ü¸¤¡­¡­¸Ï½ô´ò¿ªÀ´¿´¿´¡­¡­
		elseif r<=100 then
			ZhuE_GetPoint(MapID, InstanceID, RoleID) --ÖØÐÂ»ñµÃËæ»ú×ø±ê
			--Ïò¿Í»§¶Ë·¢ÏûÏ¢
			SendRandomResult(250,RoleID)
			--Ïò¿Í»§¶Ë·¢ÏûÏ¢
			SendRandomResult(252,RoleID)
			--»ñµÃÊ§ÂäµÄ°ü¸¤
			role.AddRoleItem(MapID, InstanceID, RoleID, 3200002, 1, -1, 3, 104) --------------´ò¿ª°ü¸¤²Ù×÷´ý±àÐ´------------
		end
	elseif t==1 then --µÚ¶þ´ÎÊ¹ÓÃ
		role.SetRoleScriptData(RoleID, 1, RoleDataType["ZhuE_UseTimes"],2)
		--Ë¢³öÍæ¼Ò¶ÔÓ¦µÈ¼¶µÄÍ¨¼©¶ñÍ½
		if r<=80 then
			map.MapCreateCreature(MapID, InstanceID, ZhuE_ETu(MapID, InstanceID, RoleID, 0), x+2, y, z+2)
			role.RemoveFromRole(MapID, InstanceID, RoleID, 3200001, 1, 101) --É¾³ýÃÜÐÅ
		--ÌáÊ¾Íæ¼Ò£ºÍ¨¼©¶ñÍ½ÒÑÌÓÅÜ£¬ÇëÇ°ÍùÐÂµÄ×ø±êÑ°ÕÒ
		elseif r<=90 then
			--Ïò¿Í»§¶Ë·¢ÏûÏ¢
			SendRandomResult(250,RoleID)
			ZhuE_GetPoint(MapID, InstanceID, RoleID) --ÖØÐÂ»ñµÃËæ»ú×ø±ê

		--ÌáÊ¾Íæ¼Ò£ºÍ¨¼©¶ñÍ½ÒÑÌÓÅÜ£¬ÇëÇ°ÍùÐÂµÄ×ø±êÑ°ÕÒ¡£
		--Í¬Ê±ÌáÊ¾£º´Ë´¦Ö»Ê£ÏÂÁË¶ñÍ½µÄÁ½¸öà¶ÂÞ¡­¡­
		elseif r<=95 then
			map.MapCreateCreature(MapID, InstanceID, ZhuE_ETu(MapID, InstanceID, RoleID, 1), x+2, y, z+2)
			map.MapCreateCreature(MapID, InstanceID, ZhuE_ETu(MapID, InstanceID, RoleID, 1), x-2, y, z-2)
			SendRandomResult(250, RoleID)
			SendRandomResult(251, RoleID)
			ZhuE_GetPoint(MapID, InstanceID, RoleID) --ÖØÐÂ»ñµÃËæ»ú×ø±ê

		--ÌáÊ¾Íæ¼Ò£ºÍ¨¼©¶ñÍ½ÒÑÌÓÅÜ£¬ÇëÇ°ÍùÐÂµÄ×ø±êÑ°ÕÒ
		--Í¬Ê±ÌáÊ¾£º·¢ÏÖÁË¶ñÍ½ÌÓÅÜÊ±Ê§ÂäµÄ°ü¸¤¡­¡­¸Ï½ô´ò¿ªÀ´¿´¿´¡­¡­
		elseif r<=100 then
			ZhuE_GetPoint(MapID, InstanceID, RoleID) --ÖØÐÂ»ñµÃËæ»ú×ø±ê
			--Ïò¿Í»§¶Ë·¢ÏûÏ¢
			SendRandomResult(250,RoleID)
			--Ïò¿Í»§¶Ë·¢ÏûÏ¢
			SendRandomResult(252,RoleID)
			--»ñµÃÊ§ÂäµÄ°ü¸¤
			role.AddRoleItem(MapID, InstanceID, RoleID, 3200002, 1, -1, 3, 104)
		end
	elseif t == 2 then --µÚÈý´ÎÊ¹ÓÃ
		map.MapCreateCreature(MapID, InstanceID, ZhuE_ETu(MapID, InstanceID, RoleID, 0), x+2, y, z+2)
		role.RemoveFromRole(MapID, InstanceID, RoleID, 3200001, 1, 101) --É¾³ýÃÜÐÅ
	end
end


