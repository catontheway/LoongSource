--男性使用道具月妖之影[1361101]function I1361101_OnUse(MapID, InstanceID, TypeID, RoleID)	YueYao_GetPoint(MapID, InstanceID, RoleID)        --调用YueYao_functions里的函数，随机一个点并且显示在队友的聊天框。endfunction I1361101_CanUse(MapID, InstanceID, TypeID, RoleID)	if MapID ~= 3017298895 then	    return 43, false	end	local i = ManAndWoman(MapID, InstanceID, RoleID)        --调用YueYao_functions里的函数，判断是否男女同队。	if i == 0 then		local MsgID = msg.BeginMsgEvent()		msg.AddMsgEvent(MsgID, 13, 0)		msg.AddMsgEvent(MsgID, 1, 511)         --"只有在两个互为好友的异性玩家组队时才能使用月妖之影。"		msg.DispatchRoleMsgEvent(RoleID, MsgID)		return 32, false	end	return 0, falseendaux.RegisterItemEvent(1361101, 1, "I1361101_OnUse")aux.RegisterItemEvent(1361101, 0, "I1361101_CanUse")--女性使用道具月妖之镜[1361102]function I1361102_OnUse(MapID, InstanceID, TypeID, RoleID)	YueYao_Appear(MapID, InstanceID, RoleID)   --调用YueYao_functions里的函数，在选定区域刷出一个适合等级的随机花妖。endfunction I1361102_CanUse(MapID, InstanceID, TypeID, RoleID)	local Pos = role.GetRoleScriptData(RoleID, 1, RoleDataType["YueYao_Pos"])	local x, y ,z = unit.GetPosition(MapID, InstanceID, RoleID)	if Pos < 1 or Pos == nil then               --没获得Pos之前无法使用月影之镜		local MsgID = msg.BeginMsgEvent()		msg.AddMsgEvent(MsgID, 13, 0)		msg.AddMsgEvent(MsgID, 1, 512)            -- "请先让您的同伴使用月妖之影获得坐标，然后再使用月妖之镜。"		msg.DispatchRoleMsgEvent(RoleID, MsgID)     --发送消息		return 32, false	elseif MapID ~= 3017298895 or x - YueYao_Pos[Pos].x < -30 or x - YueYao_Pos[Pos].x > 30 or z - YueYao_Pos[Pos].z > 30 or z - YueYao_Pos[Pos].z < -30 then		local MsgID = msg.BeginMsgEvent()		msg.AddMsgEvent(MsgID, 13, 0)		msg.AddMsgEvent(MsgID, 1, 513)            -- "此处似乎没有月妖的踪迹。"		msg.DispatchRoleMsgEvent(RoleID, MsgID)     --发送消息		return 43, false	end	local i = ManAndWoman(MapID, InstanceID, RoleID)         --调用YueYao_functions里的函数，判断是否男女同队。	local k = NearIn20Lattice(MapID, InstanceID, RoleID)        --调用YueYao_functions里的函数，判断是否男女是否在相邻的20个格子内。	if i == 0 then		local MsgID = msg.BeginMsgEvent()		msg.AddMsgEvent(MsgID, 13, 0)		msg.AddMsgEvent(MsgID, 1, 514)                --"只有在两个互为好友的异性玩家组队时才能使用月妖之镜。"		msg.DispatchRoleMsgEvent(RoleID, MsgID)		return 32, false	elseif k == 0 then		local MsgID = msg.BeginMsgEvent()		msg.AddMsgEvent(MsgID, 13, 0)		msg.AddMsgEvent(MsgID, 1, 515)                    --"您的伴侣不在身边，无法使用月妖之镜！"		msg.DispatchRoleMsgEvent(RoleID, MsgID)		return 32, false	end	return 0, falseendaux.RegisterItemEvent(1361102, 1, "I1361102_OnUse")aux.RegisterItemEvent(1361102, 0, "I1361102_CanUse")