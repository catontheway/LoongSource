TianJiangLingMiao_LongCheng_Pos = {}
TianJiangLingMiao_LongCheng_Pos[1]={x=1938 ,y=5386 ,z=1507}
TianJiangLingMiao_LongCheng_Pos[2]={x=1923 ,y=5227 ,z=1518}
TianJiangLingMiao_LongCheng_Pos[3]={x=1910 ,y=5269 ,z=1534}
TianJiangLingMiao_LongCheng_Pos[4]={x=1926 ,y=5473 ,z=1542}
TianJiangLingMiao_LongCheng_Pos[5]={x=1913 ,y=5460 ,z=1552}
TianJiangLingMiao_LongCheng_Pos[6]={x=1903 ,y=5505 ,z=1570}
TianJiangLingMiao_LongCheng_Pos[7]={x=1916 ,y=5612 ,z=1578}
TianJiangLingMiao_LongCheng_Pos[8]={x=1931 ,y=5668 ,z=1587}
TianJiangLingMiao_LongCheng_Pos[9]={x=1909 ,y=5686 ,z=1596}
TianJiangLingMiao_LongCheng_Pos[10]={x=1936 ,y=5706 ,z=1605}
TianJiangLingMiao_LongCheng_Pos[11]={x=2109 ,y=4702 ,z=1498}
TianJiangLingMiao_LongCheng_Pos[12]={x=2126 ,y=4827 ,z=1508}
TianJiangLingMiao_LongCheng_Pos[13]={x=2137 ,y=4710 ,z=1531}
TianJiangLingMiao_LongCheng_Pos[14]={x=2106 ,y=4741 ,z=1535}
TianJiangLingMiao_LongCheng_Pos[15]={x=2083 ,y=4967 ,z=1540}
TianJiangLingMiao_LongCheng_Pos[16]={x=2077 ,y=4972 ,z=1529}
TianJiangLingMiao_LongCheng_Pos[17]={x=2074 ,y=5126 ,z=1554}
TianJiangLingMiao_LongCheng_Pos[18]={x=2079 ,y=5088 ,z=1569}
TianJiangLingMiao_LongCheng_Pos[19]={x=2089 ,y=5033 ,z=1590}
TianJiangLingMiao_LongCheng_Pos[20]={x=2114 ,y=4899 ,z=1586}

TianJiangLingMiao_FengXiang_Pos = {}
TianJiangLingMiao_FengXiang_Pos[1]={x=653 ,y=8052 ,z=1318}
TianJiangLingMiao_FengXiang_Pos[2]={x=641 ,y=7990 ,z=1329}
TianJiangLingMiao_FengXiang_Pos[3]={x=628 ,y=7950 ,z=1339}
TianJiangLingMiao_FengXiang_Pos[4]={x=622 ,y=8038 ,z=1328}
TianJiangLingMiao_FengXiang_Pos[5]={x=630 ,y=8100 ,z=1316}
TianJiangLingMiao_FengXiang_Pos[6]={x=623 ,y=8242 ,z=1302}
TianJiangLingMiao_FengXiang_Pos[7]={x=619 ,y=8556 ,z=1235}
TianJiangLingMiao_FengXiang_Pos[8]={x=613 ,y=8698 ,z=1223}
TianJiangLingMiao_FengXiang_Pos[9]={x=598 ,y=8548 ,z=1236}
TianJiangLingMiao_FengXiang_Pos[10]={x=596 ,y=8694 ,z=1223}
TianJiangLingMiao_FengXiang_Pos[11]={x=693 ,y=8646 ,z=1235}
TianJiangLingMiao_FengXiang_Pos[12]={x=673 ,y=8552 ,z=1236}
TianJiangLingMiao_FengXiang_Pos[13]={x=716 ,y=8638 ,z=1259}
TianJiangLingMiao_FengXiang_Pos[14]={x=706 ,y=8376 ,z=1290}
TianJiangLingMiao_FengXiang_Pos[15]={x=695 ,y=8242 ,z=1304}
TianJiangLingMiao_FengXiang_Pos[16]={x=691 ,y=8166 ,z=1326}
TianJiangLingMiao_FengXiang_Pos[17]={x=679 ,y=8022 ,z=1343}
TianJiangLingMiao_FengXiang_Pos[18]={x=693 ,y=8618 ,z=1238}
TianJiangLingMiao_FengXiang_Pos[19]={x=679 ,y=8546 ,z=1238}
TianJiangLingMiao_FengXiang_Pos[20]={x=669 ,y=8610 ,z=1229}




BaiHuaXiaoYao_Pos = {}
BaiHuaXiaoYao_Pos[1]={x=866 ,y=10000 ,z=1836}
BaiHuaXiaoYao_Pos[2]={x=870 ,y=10000 ,z=1844}
BaiHuaXiaoYao_Pos[3]={x=875	,y=10000 ,z=1836}
BaiHuaXiaoYao_Pos[4]={x=882 ,y=10000 ,z=1843}
BaiHuaXiaoYao_Pos[5]={x=877 ,y=10000 ,z=1825}
BaiHuaXiaoYao_Pos[6]={x=866 ,y=10000 ,z=1823}
BaiHuaXiaoYao_Pos[7]={x=855 ,y=10000 ,z=1824}
BaiHuaXiaoYao_Pos[8]={x=1193 ,y=10000 ,z=2067}
BaiHuaXiaoYao_Pos[9]={x=1187 ,y=10028 ,z=2076}
BaiHuaXiaoYao_Pos[10]={x=1168 ,y=9984 ,z=2072}
BaiHuaXiaoYao_Pos[11]={x=1172 ,y=9866 ,z=2055}
BaiHuaXiaoYao_Pos[12]={x=1188 ,y=9970, z=2044}
BaiHuaXiaoYao_Pos[13]={x=1163 ,y=9862 ,z=2040}
BaiHuaXiaoYao_Pos[14]={x=1154 ,y=9920 ,z=2056}
BaiHuaXiaoYao_Pos[15]={x=605 ,y=10042 ,z=2074}
BaiHuaXiaoYao_Pos[16]={x=615 ,y=10002 ,z=2078}
BaiHuaXiaoYao_Pos[17]={x=620 ,y=10010 ,z=2070}
BaiHuaXiaoYao_Pos[18]={x=617 ,y=10022 ,z=2053}
BaiHuaXiaoYao_Pos[19]={x=606 ,y=10060 ,z=2059}
BaiHuaXiaoYao_Pos[20]={x=614 ,y=10018 ,z=2071}
BaiHuaXiaoYao_Pos[21]={x=589 ,y=10208 ,z=2061}

TianJiangLingMiao_Max = 10

function TianJiangLingMiao_OnStart(actID)
--[[
	local curhour = os.date("%H")
	local curmonth = os.date("%m")
	local curday = tonumber(os.date("%d"))
	local curmin = os.date("%M")
	local CanSummon = 0
	--if curhour == "19" or curhour == "20" or curhour == "21" or curhour == "22" then
	if curhour == "20" or curhour == "21" then
		if curmin =="00" then
			CanSummon = 1
		end
	end

	if CanSummon == 1 then
]]
		local MsgID = msg.BeginMsgEvent()
		msg.AddMsgEvent(MsgID, 100, 1327)--	天帝特降仙家灵苗于凡尘，以示普天同乐，请各位英雄速速前往龙城龙心岛或凤翔五色山下抢种灵苗！
		msg.DispatchWorldMsgEvent(MsgID)
		local TianJiangLingMiao_m02 = deepcopy(TianJiangLingMiao_LongCheng_Pos)
		local TianJiangLingMiao_m03 = deepcopy(TianJiangLingMiao_FengXiang_Pos)
		local j = TianJiangLingMiao_Max
		--[[if curmonth == "02" and curday >=9 and curday <= 16 then

				--在30%随机坐标中刷出百味灵壤
				for k = 1,TianJiangLingMiao_Max*0.3 do
					local Index_pos = math.random(1,j)
					local Temp1 = table.remove(TianJiangLingMiao_m02,Index_pos)
					local Temp2 = table.remove(TianJiangLingMiao_m03,Index_pos)
					map.MapCreateColCreature(3017298127, -1, 4900408, Temp1.x, Temp1.y, Temp1.z, 1)
					map.MapCreateColCreature(3017298383, -1, 4900408, Temp2.x, Temp2.y, Temp2.z, 1)
					j = j - 1
				end
				--在20%随机坐标中刷出珍肴灵壤
				for k = 1,TianJiangLingMiao_Max*0.2 do
					local Index_pos = math.random(1,j)
					local Temp1 = table.remove(TianJiangLingMiao_m02,Index_pos)
					local Temp2 = table.remove(TianJiangLingMiao_m03,Index_pos)
					map.MapCreateColCreature(3017298127, -1, 4900411, Temp1.x, Temp1.y, Temp1.z, 1)
					map.MapCreateColCreature(3017298383, -1, 4900411, Temp2.x, Temp2.y, Temp2.z, 1)
					j = j - 1
				end
				--在50%随机坐标中刷出玫瑰灵壤
				for k = 1,TianJiangLingMiao_Max*0.5 do
					local Index_pos = math.random(1,j)
					local Temp1 = table.remove(TianJiangLingMiao_m02,Index_pos)
					local Temp2 = table.remove(TianJiangLingMiao_m03,Index_pos)
					map.MapCreateColCreature(3017298127, -1, 4900414, Temp1.x, Temp1.y, Temp1.z, 1)
					map.MapCreateColCreature(3017298383, -1, 4900414, Temp2.x, Temp2.y, Temp2.z, 1)
					j = j - 1
				end

		else]]
				--在60%随机坐标中刷出百味灵壤
				for k = 1,TianJiangLingMiao_Max*0.8 do
					local Index_pos = math.random(1,j)
					local Temp1 = table.remove(TianJiangLingMiao_m02,Index_pos)
					local Temp2 = table.remove(TianJiangLingMiao_m03,Index_pos)
					map.MapCreateColCreature(3017298127, -1, 4900408, Temp1.x, Temp1.y, Temp1.z, 1)
					map.MapCreateColCreature(3017298383, -1, 4900408, Temp2.x, Temp2.y, Temp2.z, 1)
					j = j - 1
				end
				--在40%随机坐标中刷出珍肴灵壤
				for k = 1,TianJiangLingMiao_Max*0.2 do
					local Index_pos = math.random(1,j)
					local Temp1 = table.remove(TianJiangLingMiao_m02,Index_pos)
					local Temp2 = table.remove(TianJiangLingMiao_m03,Index_pos)
					map.MapCreateColCreature(3017298127, -1, 4900411, Temp1.x, Temp1.y, Temp1.z, 1)
					map.MapCreateColCreature(3017298383, -1, 4900411, Temp2.x, Temp2.y, Temp2.z, 1)
					j = j - 1
				end
		--end
		map.MapCreateColCreature(3017298383, -1, 1534101, 854, 10000, 1836,1)

		for k = 1,21 do
			map.MapCreateColCreature(3017298383, -1, 1534105, BaiHuaXiaoYao_Pos[k].x, BaiHuaXiaoYao_Pos[k].y, BaiHuaXiaoYao_Pos[k].z, 1)
		end
		local MsgID = msg.BeginMsgEvent()
		msg.AddMsgEvent(MsgID, 100, 1338)--	万花仙子及众多百花小妖，亲临凤翔府泄愤，5分钟后即将展开攻击，请各位英雄速速前往应对！
		msg.DispatchWorldMsgEvent(MsgID)
	--end
end

aux.RegisterActEvent(73, 2, "TianJiangLingMiao_OnStart")
aux.RegisterActEvent(92, 2, "TianJiangLingMiao_OnStart")
aux.RegisterActEvent(93, 2, "TianJiangLingMiao_OnStart")
aux.RegisterActEvent(94, 2, "TianJiangLingMiao_OnStart")
aux.RegisterActEvent(95, 2, "TianJiangLingMiao_OnStart")
aux.RegisterActEvent(96, 2, "TianJiangLingMiao_OnStart")
